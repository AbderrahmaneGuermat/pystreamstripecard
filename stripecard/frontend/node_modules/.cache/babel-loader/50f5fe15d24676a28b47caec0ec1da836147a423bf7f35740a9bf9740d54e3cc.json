{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Equipo\\\\OneDrive\\\\Bussines\\\\AI-CONTENT\\\\Mine\\\\app\\\\components\\\\template - card\\\\my_component\\\\frontend\\\\src\\\\MyComponent.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { Elements, CardElement, useElements } from '@stripe/react-stripe-js';\nimport { Streamlit, StreamlitComponentBase, withStreamlitConnection } from \"streamlit-component-lib\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CheckoutForm = ({\n  stripePublicKey\n}) => {\n  _s();\n  const [stripe, setStripe] = useState(null);\n  const elements = useElements();\n  const [message, setMessage] = useState(\"\");\n  useEffect(() => {\n    if (stripePublicKey) {\n      setStripe(loadStripe(stripePublicKey));\n    }\n  }, [stripePublicKey]);\n  const handleSubmit = async event => {\n    event.preventDefault();\n    if (!stripe || !elements) {\n      // Stripe.js aún no ha cargado.\n      console.log(\"Stripe.js aún no ha cargado.\");\n      return;\n    }\n    const card = elements.getElement(CardElement);\n    const result = await stripe.createToken(card);\n    if (result.error) {\n      console.log(result.error.message);\n      setMessage(result.error.message);\n      Streamlit.setComponentValue({\n        token: null,\n        message: result.error.message\n      });\n    } else {\n      console.log(\"Token generado: \" + result.token.id);\n      setMessage(\"Pago exitoso\");\n      Streamlit.setComponentValue({\n        token: result.token.id,\n        message: \"Pago exitoso\"\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(CardElement, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      disabled: !stripe,\n      children: \"Pagar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n_s(CheckoutForm, \"IL0rWuGZOoKA3uOPaSMXAhwBLuE=\", false, function () {\n  return [useElements];\n});\n_c = CheckoutForm;\nclass MyStripeComponent extends StreamlitComponentBase {\n  constructor(...args) {\n    super(...args);\n    this.render = () => {\n      // Aquí es donde recuperamos la clave pública de Stripe pasada desde Python\n      const stripePublicKey = this.props.args[\"stripe_public_key\"];\n      return /*#__PURE__*/_jsxDEV(Elements, {\n        stripe: stripePublicKey ? loadStripe(stripePublicKey) : null,\n        children: /*#__PURE__*/_jsxDEV(CheckoutForm, {\n          stripePublicKey: stripePublicKey\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }, this);\n    };\n  }\n}\nexport default _c2 = withStreamlitConnection(MyStripeComponent);\nvar _c, _c2;\n$RefreshReg$(_c, \"CheckoutForm\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","useState","useEffect","loadStripe","Elements","CardElement","useElements","Streamlit","StreamlitComponentBase","withStreamlitConnection","jsxDEV","_jsxDEV","CheckoutForm","stripePublicKey","_s","stripe","setStripe","elements","message","setMessage","handleSubmit","event","preventDefault","console","log","card","getElement","result","createToken","error","setComponentValue","token","id","onSubmit","children","fileName","_jsxFileName","lineNumber","columnNumber","type","disabled","_c","MyStripeComponent","constructor","args","render","props","_c2","$RefreshReg$"],"sources":["C:/Users/Equipo/OneDrive/Bussines/AI-CONTENT/Mine/app/components/template - card/my_component/frontend/src/MyComponent.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport { Elements, CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\r\nimport { Streamlit, StreamlitComponentBase, withStreamlitConnection } from \"streamlit-component-lib\";\r\n\r\n\r\ninterface CheckoutFormProps {\r\n  stripePublicKey: string;\r\n}\r\n\r\nconst CheckoutForm = ({ stripePublicKey }) => {\r\n  const [stripe, setStripe] = useState(null);\r\n  const elements = useElements();\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (stripePublicKey) {\r\n      setStripe(loadStripe(stripePublicKey));\r\n    }\r\n  }, [stripePublicKey]);\r\n\r\n  const handleSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n\r\n    if (!stripe || !elements) {\r\n      // Stripe.js aún no ha cargado.\r\n      console.log(\"Stripe.js aún no ha cargado.\");\r\n      return;\r\n    }\r\n\r\n    const card = elements.getElement(CardElement);\r\n    const result = await stripe.createToken(card);\r\n\r\n    if (result.error) {\r\n      console.log(result.error.message);\r\n      setMessage(result.error.message);\r\n      Streamlit.setComponentValue({ token: null, message: result.error.message });\r\n    } else {\r\n      console.log(\"Token generado: \" + result.token.id);\r\n      setMessage(\"Pago exitoso\");\r\n      Streamlit.setComponentValue({ token: result.token.id, message: \"Pago exitoso\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <CardElement />\r\n      <button type=\"submit\" disabled={!stripe}>Pagar</button>\r\n      <div>{message}</div>\r\n    </form>\r\n  );\r\n};\r\n\r\nclass MyStripeComponent extends StreamlitComponentBase {\r\n  public render = (): React.ReactNode => {\r\n    // Aquí es donde recuperamos la clave pública de Stripe pasada desde Python\r\n    const stripePublicKey = this.props.args[\"stripe_public_key\"];\r\n    \r\n    return (\r\n      <Elements stripe={stripePublicKey ? loadStripe(stripePublicKey) : null}>\r\n        <CheckoutForm stripePublicKey={stripePublicKey} />\r\n      </Elements>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStreamlitConnection(MyStripeComponent);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}